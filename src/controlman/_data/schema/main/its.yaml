$schema: https://json-schema.org/draft/2020-12/schema
title: Issue Tracking
description: |
  The schema for the issue tracking system of a project.
default:

properties:
  changelog:
    title: Changelog Configurations
    description: |
      Configurations for different changelog files.
      Project's changelog templates and paths.
      Configurations and templates for your project's changelogs and release notes.
    type: object
    additionalProperties:
      title: Changelog
      description: |
        Configurations for a changelog file.
        For each changelog, add a key-value pair,
        where the key is the ID of the changelog, to reference in other places.
      type: object
      additionalProperties: false
      required: [ name, title, path, intro, entry, sections ]
      properties:
        name:
          title: Name
          description: Name of the changelog.
          $ref: nonempty_string
          examples:
            - Public API
        path:
          title: Path
          description: Path to the changelog file, relative to the root of the repository.
          $ref: nonempty_string
          examples:
            - CHANGELOG.md
        title:
          title: Title
          description: Title of the changelog document.
          $ref: nonempty_string
          examples:
            - ${{ name }} Changelog (Public API)
        intro:
          title: Introduction
          description: Introduction text of the changelog.
          $ref: nonempty_string
          examples: |
            All notable changes to this project will be documented in this file.

            The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
            and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).
        entry:
          title: Entry
          description: Configurations for the entries in the changelog.
          type: object
          default: { }
          additionalProperties: false
          required: [ title, intro ]
          properties:
            title:
              title: Title
              description: Title of the entry.
              type: string
              minLength: 1
              default: "[{ver_dist}] – {date}"
            intro:
              title: Introduction
              description: Introduction text of the entry.
              type: string
              minLength: 1
              default: |
                - Commit Type: {commit_type}
                - Commit Title: {commit_title}
                - Parent Commit: [{parent_commit_hash}]({parent_commit_url})
        sections:
          title: Sections
          description: Sections of each entry in the changelog.
          type: array
          minItems: 1
          items:
            title: Section
            description: Section of the changelog.
            type: object
            additionalProperties: false
            required: [ id, title, description ]
            properties:
              id:
                title: ID
                description: ID of the section, to reference in other places.
                type: string
              title:
                title: Title
                description: Title of the section.
                type: string
              description:
                title: Description
                description: Description of the section.
                type: string
  commit:
    title: Configurations for different types of commits in your repository.
    description: Commit types, sub-types and descriptions
    type: object
    additionalProperties: false
    required: [ primary, secondary ]
    properties:
      auto:
        title: Automatic Commits
        description: Automatic commit types
        type: object
        additionalProperties: false
        required: [ maintain, sync ]
        properties:
          maintain:
            title: Maintain
            description: |
              Continuous maintenance and refactoring tasks.
            $ref: '#/definitions/commit_auto'
          sync:
            title: Sync
            description: |
              Continuous configuration automation and synchronization of dynamic files.
            $ref: '#/definitions/commit_auto'
      primary:
        title: Primary Commits
        description: Primary action commit types
        type: object
        additionalProperties:
          title: Custom Primary Commit
          description: |
            Configurations for a custom primary commit type.
            For each custom commit type, a key-value pair must be added,
            where the key is the ID of the commit type, to reference in other places.
          $ref: '#/definitions/commit_primary'
        properties:
          major:
            title: Major Release
            description: Configurations for a major release commit type.
            $ref: '#/definitions/commit_primary'
          minor:
            title: Minor Release
            description: Configurations for a minor release commit type.
            $ref: '#/definitions/commit_primary'
          patch:
            title: Patch Release
            description: Configurations for a patch release commit type.
            $ref: '#/definitions/commit_primary'
          post:
            title: Post-release
            description: Configurations for a post-release commit type.
            $ref: '#/definitions/commit_primary'
          web:
            title: Website
            description: Configurations for a website commit type.
            $ref: '#/definitions/commit_primary'
      secondary:
        title: Secondary Commits
        description: |
          Secondary action commit types.
          For each commit type, a key-value pair must be added,
          where the key is both the ID of the commit type (to reference in other places)
          and its commit message type.
        type: object
        additionalProperties:
          title: Custom Secondary Commit
          description: Configurations for a secondary commit type.
          type: object
          additionalProperties: false
          properties:
            description:
              title: Description
              description: Description of the commit type.
              type: string
            changelog_id:
              title: Changelog ID
              description: ID of the changelog to which the commit will be added.
              type: string
            changelog_section_id:
              title: Changelog Section ID
              description: ID of the section of the changelog to which the commit will be added.
              type: string
  label:
    title: GitHub labels settings for the project
    description: |
      [GitHub docs](https://docs.github.com/en/issues/using-labels-and-milestones-to-track-work/managing-labels)
    type: object
    additionalProperties: false
    required: [ version, branch, primary_type, status ]
    properties:
      type:
        title: Primary Labels
        description: Labels for primary commit types.
        type: object
        additionalProperties: false
        properties:
          prefix:
            title: Prefix
            description: Prefix for label names.
            $ref: '#/definitions/label_prefix'
          color:
            title: Color
            description: Color of the labels.
            $ref: '#/definitions/label_color'
          label:
            title: Labels
            description: Primary labels.
            type: object
            additionalProperties:
              title: Custom Primary Labels
              description: Custom primary labels.
              $ref: '#/definitions/label_group_element'
            properties:
              major:
                title: Major Release
                description: Label for major release.
                $ref: '#/definitions/label_group_element'
              minor:
                title: Minor Release
                description: Label for minor release.
                $ref: '#/definitions/label_group_element'
              patch:
                title: Patch Release
                description: Label for patch release.
                $ref: '#/definitions/label_group_element'
              post:
                title: Post Release
                description: Label for post release.
                $ref: '#/definitions/label_group_element'
              web:
                title: Website
                description: Label for website deployment.
                $ref: '#/definitions/label_group_element'
      subtype:
        title: Secondary Type Labels
        description: Issue sub types
        $ref: '#/definitions/label_group'
      status:
        title: Status
        description: Issue/pull status
        type: object
        additionalProperties: false
        required: [ prefix, color, labels ]
        properties:
          prefix:
            title: Prefix
            description: Prefix for the label name
            $ref: '#/definitions/label_prefix'
          color:
            title: Color
            description: Color of the label.
            $ref: '#/definitions/label_color'
          label:
            title: Labels
            description: Labels for the issue sub-type
            type: object
            additionalProperties: false
            required:
              - triage
              - rejected
              - duplicate
              - invalid
              - planning
              - requirement_analysis
              - design
              - implementation
              - testing
              - deploy_alpha
              - deploy_beta
              - deploy_rc
              - deploy_final
            properties:
              triage:
                title: Triage
                description: The issue is being triaged.
                $ref: '#/definitions/label_group_element'
              rejected:
                title: Rejected
                description: The issue/pull-request has been rejected.
                $ref: '#/definitions/label_group_element'
              duplicate:
                title: Duplicate
                description: The issue/pull-request is a duplicate.
                $ref: '#/definitions/label_group_element'
              invalid:
                title: Invalid
                description: The issue/pull-request is invalid.
                $ref: '#/definitions/label_group_element'
              planning:
                title: Planning
                description: The issue is in the planning phase.
                $ref: '#/definitions/label_group_element'
              requirement_analysis:
                title: Requirement Analysis
                description: The issue is in the requirement analysis phase.
                $ref: '#/definitions/label_group_element'
              design:
                title: Design
                description: The issue is in the design phase.
                $ref: '#/definitions/label_group_element'
              implementation:
                title: Implementation
                description: The issue is in the implementation phase.
                $ref: '#/definitions/label_group_element'
              testing:
                title: Testing
                description: The issue is in the testing phase.
                $ref: '#/definitions/label_group_element'
              deploy_alpha:
                title: Alpha Release
                description: The issue/pull-request is in alpha release.
                $ref: '#/definitions/label_group_element'
              deploy_beta:
                title: Beta Release
                description: The issue/pull-request is in beta release.
                $ref: '#/definitions/label_group_element'
              deploy_rc:
                title: Release Candidate
                description: The issue/pull-request is published as a release candidate.
                $ref: '#/definitions/label_group_element'
              deploy_final:
                title: Final Release
                description: The issue/pull-request has been merged into a release branch.
                $ref: '#/definitions/label_group_element'
      branch:
        title: Branch
        description: Branch labels. This is an automatic label group.
        $ref: '#/definitions/label_group_auto'
      version:
        title: Version
        description: Version labels. This is an automatic label group.
        $ref: '#/definitions/label_group_auto'
      custom:
        title: Custom Labels
        description: Custom labels.
        type: object
        additionalProperties: false
        properties:
          single:
            title: Single
            description: Custom single labels.
            type: object
            additionalProperties:
              type: object
              additionalProperties: false
              required: [ name, color, description ]
              properties:
                name:
                  title: Name
                  description: Name of the label
                  type: string
                color:
                  title: Color
                  description: Color of the label
                  $ref: '#/definitions/label_color'
                description:
                  title: Description
                  description: Description of the label.
                  $ref: '#/definitions/label_description'
          group:
            title: Label Groups
            description: Custom label groups.
            type: object
            additionalProperties:
              title: Label Group
              description: A group of labels.
              $ref: '#/definitions/label_group'
      all:
        title: All labels
        type: array
        items:
          type: object
  issue:
    title: Issues
    description: |
      Configurations of the project's issue tracking system (cf. [GitHub Issues](https://docs.github.com/en/issues/tracking-your-work-with-issues)).
      
      These include [issue form](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository#creating-issue-forms)
      templates used to automatically maintain issue ticket forms,
      and settings for the project's [issue template chooser]()https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/configuring-issue-templates-for-your-repository#configuring-the-template-chooser),
      which is automatically maintained via the `.github/ISSUE_TEMPLATE/config.yaml` configuration file.
    type: object
    additionalProperties: false
    required: [ blank_enabled, contact_links, forms, dev_protocol ]
    properties:
      blank_enabled:
        description: Whether to allow submission of free-form issues
        type: boolean
        default: false
      contact_links:
        description: External links to be shown on the issue template chooser
        type: array
        default: [ ]
        uniqueItems: true
        items:
          type: object
          additionalProperties: false
          properties:
            name:
              description: Title shown on the issue template chooser
              type: string
            about:
              description: Description shown on the issue template chooser
              type: string
            url:
              description: URL to the external link
              type: string
              format: uri
          required: [ name, about, url ]
      forms:
        title: Issue form definitions and configurations.
        type: array
        default: [ ]
        uniqueItems: true
        items:
          type: object
          additionalProperties: false
          properties:
            id:
              title: Unique identifier of the issue form.
              description: |
                This is used to reference the form in other places
                (e.g. as a key of the `maintainer.issue` object, to assign the issue to a maintainer),
                and to generate the filename of the issue template's YAML file.
                The ID must start with an alphanumeric character,
                and can only contain alphanumeric characters, underscores, and hyphens.
              type: string
              pattern: '^[a-zA-Z0-9][a-zA-Z0-9_-]*$'
            type:
              title: Primary type of the issue.
              description: |
                Each form must be assigned a primary type,
                which must match the key of one of the [primary type labels](../label/index.md#primary-types),
                and consequently, the key of either one of the [primary action commit types](../commit/index.md#primary-action-types),
                or one of the [primary custom commit types](../commit/index.md#primary-custom-types).
                
                This is used to correlate each issue in the repository with a primary commit type:
                {{ pp_meta.name }} automatically adds the corresponding primary type label
                to each issue that is created using the form.
                Subsequently, when a development branch is merged into a release branch,
                {{ pp_meta.name }} first determines the corresponding issue of the branch from the branch name,
                and then ascertains the corresponding primary commit type from the issue's primary type label,
                in order to decide which actions to perform on the release branch.
              type: string
            subtype:
              title: Subtype of the issue.
              description: |
                If two or more forms are assigned the same [primary type](#primary-type),
                they must each define a unique subtype.
                The subtype must match the key of one of the [subtype labels](../label/index.md#subtypes).
                {{ pp_meta.name }} automatically adds the corresponding subtype label
                to each issue that is created using the form,
                and uses that with conjunction with the primary type label
                to unambiguously identify the form that was used to create each issue in the repository.
                It also helps maintainers and users
                differentiate between issues with the same primary type.
              type: string
              default: ''
            pre_process:
              description: |
                Some issue forms, or some elements of an issue form, may only need to be present
                when certain conditions are met. Instead of you having to manually modify issue forms
                each time one of these conditions changes, {{ pp_meta.name }} allows you to dynamically
                define conditions for each form and each of its elements, so that they are automatically
                added/removed according to the specified conditions. This is done by adding a `pre_process`
                key either to the form itself, or to specific elements of the form. The value of the
                `pre_process` key must be an object with one of the following keys:
                - `if_any`: The form/element is only displayed if any of the specified values evaluate to `True`.
                - `if_all`: The form/element is only displayed if all of the specified values evaluate to `True`.
                - `if_none`: The form/element is only displayed if none of the specified values evaluate to `True`.
                - `if_equal`: The form/element is only displayed if all of the specified values are equal.

                For any of the above keys, the value must be an array, where the elements of the array
                can have any type (e.g., string, integer, boolean, etc.). For boolean conditions
                (i.e., `if_any`, `if_all`, and `if_none`), the value of each element is cast to a boolean
                in Python, thus for example, `0`, `0.0`, `""`, `[]`, `{}`, and `null` all evaluate to `False`,
                while any non-zero number, non-empty string, non-empty list, and non-empty dictionary evaluates to `True`.

                For example, in {{ pp_meta.name }}'s default configurations, there are three separate issue forms
                defined for reporting bugs in the package's API, GUI, and CLI. However, your package may only have
                some of these interfaces, in which case it makes sense to only show the corresponding issue forms
                when the corresponding interfaces are present. This is achieved by adding a condition to each form.
              examples:
                - if_any: [ "${‎{ package.releases.gui_scripts }}" ] # Display a form only if the package has a GUI interface
                - if_any: [ "${‎{ package.releases.cli_scripts }}" ] # Display a form only if the package has a CLI interface
                - if_any: [ "${‎{ package.releases.has_scripts }}" ] # Display an element within a form only if the package has scripts
              $ref: '#/definitions/pre_process'
            post_process:
              description: |
                {{ pp_meta.name }} allows you to define post-processing instructions for each form,
                which are executed after an issue is created using the form.
                
                Issues that are created using GitHub's issue forms are visually not very appealing,
                since GitHub simply creates a new `<h3>` heading for each form element,
                and adds the user input underneath, without any formatting.
                Moreover, there may be some elements that are only meant for the submission step,
                and are not meant to be displayed in the issue body (e.g., checkboxes for agreeing with terms and conditions).
                Therefore, {{ pp_meta.name }} allows you to define a template for the issue body,
                which is used to reformat the issue body after the issue is created.
                The template must be defined as a string representing valid Markdown and/or HTML syntax,
                where the user input for each form element is referenced (similiar to Python strings)
                using the syntax `{id}`, where `id` is the `id` of the corresponding form element.
              examples:
                - body: |
                    <h2>Bug Location</h2>
                    
                    <ul>
                    <li><b>Package Version</b>: {version}</li>
                    <li><b>Fully Qualified Name</b>: {api_entry}</li>
                    </ul>
                    
                    <h2>System and Version Specifications</h2>
                    
                    <ul>
                    <li><b>Operating System</b>: {os}</li>
                    <li><b>Python Version</b>: {python_version}</li>
                    <li><b>Package Manager</b>: {package_manager}</li>
                    <li>
                    <details>
                    <summary><b>Environment</b></summary>
                    
                    ```
                    {environment}
                    ```
                    
                    </details>
                    </li>
                    </ul>
                    
                    <h2>Bug Summary</h2>
                    
                    {summary}
                    
                    <h2>Unit-Test / Minimal Reproducible Example (MRE)</h2>
                    
                    {code}
                    
                    <h2>Error Message</h2>
                    
                    {log}
              type: object
              additionalProperties: false
              properties:
                assign_creator:
                  title: Adding the Issue Creator as Assignee
                  description: |
                    You may want to ask the person who created an issue whether they would like to contribute
                    to the resolution of the issue, and if so, add them as an assignee to the issue.
                    {{ pp_meta.name }} allows you to do this automatically; first you need to add a `checkbox` element
                    to the form, which asks the user whether they would like to be added as an assignee.
                    Then, add a key `assign_creator` to the `post_process` object of the form, and under that,
                    add a key `if_checkbox` whose value must be an object with a key `id`,
                    specifying the `id` of the corresponding checkbox element.
                    If the checkbox element has multiple checkboxes,
                    you can also specify the `number` of the checkbox (starting from 1) that must be checked.
                    Also, if you have formulated the checkbox label in a way that the creator must be added as an assignee
                    if the checkbox is unchecked, you can set the `is_checked` key to `False`.
                    
                    ::::{dropdown} Example
                    :::{code-block} yaml
                    :caption: 🗂 `.meta/dev/issue.yaml`
                    forms:
                      - body:
                          - type: checkboxes
                            id: collab
                            attributes:
                              label: |
                                Thank you again for filling this bug report.
                                If you are willing to collaborate on fixing the issue,
                                please select the option below.
                              options:
                                - label: I am willing to work on the issue and submit a pull request.
                                  required: false
                        post_process:
                          assign_creator:
                            if_checkbox:
                              id: collab
                              number: 1  # optional, default: 1
                              is_checked: true  # optional, default: true
                    :::
                    ::::
                  type: object
                  additionalProperties: false
                  properties:
                    if_checkbox:
                      type: object
                      additionalProperties: false
                      properties:
                        id:
                          type: string
                        number:
                          type: integer
                          default: 1
                        is_checked:
                          type: boolean
                          default: true
                      required: [ id, number, is_checked ]
                body:
                  title: Formatting the Issue Body
                  type: string
            name:
              title: Name of the issue form.
              description: |
                Each form must have a unique name,
                which is what is displayed to the user on the template chooser interface
                when creating a new issue on GitHub.
              examples:
                - 🖥 App 🐞 Bug Report 📱 API
              type: string
            description:
              title: Description of the issue form.
              description: |
                In addition to a name, each form must also have a description,
                which appears below its name on the template chooser interface.
              examples:
                - Report a problem encountered while using the library's API.
              type: string
            labels:
              title: Labels to be added to the issue.
              description: |
                Optionally, a list of additional labels can be assigned to each form,
                which are then automatically added to each issue that is created using the form.
                Each assigned label must exactly match the full name of an existing label in the repository,
                as defined in the [label configurations](../label/index.md).

                Note that the [primary type](../label/index.md#primary-types), [subtype](../label/index.md#subtypes),
                and [status](../label/index.md#statuses) labels are automatically added to each issue,
                and do not need to be specified here.
              examples:
                - [ first-custom-label, second-custom-label ]
              type: array
              uniqueItems: true
              minItems: 1
              items:
                type: string
            projects:
              title: Projects to add the issue to.
              description: |
                Optionally, a list of projects can be specified for each form,
                in which case each issue created using the issue form
                is automatically added to all specified projects.
                Each project must be specified in the format `PROJECT-OWNER/PROJECT-NUMBER`,
                where `PROJECT-OWNER` is the username or organization name of the project owner,
                and `PROJECT-NUMBER` is the number of the project in the project owner's repository.

                Note that for this to work, either your project's
                [auto-add workflow](https://docs.github.com/en/issues/planning-and-tracking-with-projects/automating-your-project/adding-items-automatically)
                must be enabled, or the person opening the issue must have write permissions for the specified projects.
              examples:
                - [ RepoDynamics/3, AAriam/1 ]
              type: array
              uniqueItems: true
              items:
                type: string
            title:
              description: |
                Optionally, a default title can be added to each form,
                which will automatically pre-populate the title field
                when a user creates a new issue using the form.
              examples:
                - "API Bug: "
              type: string
            body:
              description: |
                Each form must have a body, defined as an array of form elements for requesting user input.
                Each form element itself is defined as a set of key-value pairs
                that determine the type of the element, the properties of the element,
                and the constraints you want to apply to the element.
                The rules and syntax are identical to that of the
                [GitHub's form schema](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-githubs-form-schema),
                with several additional options and constraints:

                - Each form must have a `dropdown` element whose `id` is set to either `version` or `branch`,
                  and whose `options` are an array of all the supported package versions (for version)
                  or active release branches (for branch) in the repository.
                  The `options` can be defined dynamically, by setting it equal to
                  `${‎{ package.releases.package_versions }}` (for version) or
                  `${‎{ package.releases.branch_names }}` (for branch).
                  It makes sense to add version to forms that concern an issue with the package,
                  and branch to forms for package-independent issues.
                  When branch is set, {{ pp_meta.name }} parses the the user input
                  and automatically adds the corresponding [branch labels](../label/index.md#branches)
                  to each issue that is created using the form.
                  Similarly, when version is set, {{ pp_meta.name }} determines the branch
                  hosting each selected version, and automatically adds both
                  [version labels](../label/index.md#versions) and branch labels to each issue.
                  During the triage process, the maintainers can add or remove version/branch labels
                  as needed; for example, the user may have selected only one version where they encountered the issue,
                  but during the triage process, the maintainers may determine that the issue affects multiple versions.
                  Subsequently, when the issue is labeled as [in development](../label/index.md#statuses),
                  {{ pp_meta.name }} automatically creates a new development branch from each branch that is labeled.
                - The value of the `label` key for each element that defines it (i.e., all but the `markdown` element)
                  must be unique across all form elements.
                  This is needed for the [post-processing](#post-processing) step,
                  since the `label` is the only way to identify each element in the issue body after it has been created.
                - You can specify an additional [`pre_process`](#pre-processing) key for each element.
              type: array
              minItems: 1
              items:
                type: object
                additionalProperties: false
                properties:
                  type:
                    type: string
                    enum: [ checkboxes, dropdown, input, markdown, textarea ]
                  id:
                    type: string
                    pattern: ^[A-Za-z][A-Za-z0-9_-]*$
                  attributes:
                    type: object
                    additionalProperties: true
                  validations:
                    type: object
                    additionalProperties: true
                  pre_process:
                    $ref: '#/definitions/pre_process'
                required: [ type, attributes ]
          required: [ id, primary_type, name, description, body ]
  document:
    description: Development process protocol specifications
    type: object
    default: { }
    additionalProperties: false
    properties:
      prerelease_temp_path:
        description: >-
          Path to the file relative to the repository root
          for storing pre-release development process protocols.
        type: string
        default: docs/prerelease_dev_protocols.md
      template:
        type: object
        default: { }
        additionalProperties: false
        properties:
          title:
            type: string
            default: Development Process Protocol
          body:
            type: string
            default: |
              ## Plan
              {issue_body}


              ## Software Requirements Specification
              TBD


              ## Design Specification
              TBD


              ## Implementation
              TBD
              {primary_commit_summary}
              {secondary_commits_tasklist}


              ## References
              {references}


              ## Timeline
              {timeline}
        required: [ title, body ]
    required: [ prerelease_temp_path, template ]
  pull:
    title: Pull Requests
    description: GitHub pull request settings for the project
    type: object
    additionalProperties: false
    properties:
      template:
        title: Templates
        description: |
          Different [pull request templates](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository)
          can only be accessed via [query parameters](https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/proposing-changes-to-your-work-with-pull-requests/using-query-parameters-to-create-a-pull-request)
          . Otherwise, the main template directly under [./github] is used.
        type: object
        additionalProperties:
          type: string
        properties:
          default:
            type: string
  discussion:
    title: GitHub Discussions
    description: |
      [GitHub Discussions](https://docs.github.com/en/discussions/collaborating-with-your-community-using-discussions/about-discussions)
      configurations for the repository.
    examples:
      - form:
          question_issues:
            # A default title that will be pre-populated in the discussion submission form.
            title: "[General] "

            # Labels that will automatically be added to discussions created with this template.
            labels: [ "General Introduction" ]

            # Definition of the input types in the discussion form.
            body:
              - type: markdown
                attributes:
                  value: |
                    This is text that will show up in the template!
              - type: textarea
                id: improvements
                attributes:
                  label: Top 3 improvements
                  description: "What are the top 3 improvements we could make to this project?"
                  value: |
                    1.
                    2.
                    3.
                    ...
                  render: bash
                validations:
                  required: true
              - type: markdown
                attributes:
                  value: |
                    ## Markdown header
                    And some more markdown
              - type: input
                id: has-id
                attributes:
                  label: Suggestions
                  description: A description about suggestions to help you
                validations:
                  required: true
              - type: dropdown
                id: download
                attributes:
                  label: Which area of this project could be most improved?
                  options:
                    - Documentation
                    - Pull request review time
                    - Bug fix time
                    - Release cadence
                validations:
                  required: true
              - type: checkboxes
                attributes:
                  label: Check that box!
                  options:
                    - label: This one!
                      required: true
                    - label: I won't stop you if you check this one, too
              - type: markdown
                attributes:
                  value: |
                    ### The thrilling conclusion
                    _to our template_

          question_bug:
            title: Is this a bug?
            labels:
              - bug
            body:
              - type: markdown
                id: bug
                attributes:
                  value: |
                    **Describe the bug**


    type: object
    additionalProperties: false
    properties:
      category:
        title: Discussion Categories
        description: |
          Information about available
          [discussion categories](https://docs.github.com/en/discussions/managing-discussions-for-your-community/managing-categories-for-discussions),
          and definition of [discussion category forms](https://docs.github.com/en/discussions/managing-discussions-for-your-community/creating-discussion-category-forms)
          to customize the templates that are available for community members to use
          when they open new discussions in the repository.

          To define a form for an existing discussion category,
          add a key-value pair where the key is the slug of the category name
          in the repository. For example, to create a template for the "New Releases" category,
          use the key `new-releases`.

          :::{admonition} Manual Action Required
          :class: attention

          Defining forms here will automatically
          [create discussion category forms](https://docs.github.com/en/discussions/managing-discussions-for-your-community/creating-discussion-category-forms)
          in the `.github/DISCUSSION_TEMPLATE/` directory of the repository.
          However, unlike issue forms, where adding a new template file in the `.github/ISSUE_TEMPLATE/` directory
          automatically adds it to the list of available issues, discussion category forms only work when a
          corresponding discussion category is already created in the repository.
          Moreover, creating new discussion categories is not yet supported by the GitHub API.
          This means that for each new discussion category form defined here, you must manually
          [create the corresponding discussion category](https://docs.github.com/en/discussions/managing-discussions-for-your-community/managing-categories-for-discussions#creating-a-category)
          in the repository. For example, if you define a form here under the key `new-releases`,
          you must also create a category named `New Releases`, or any other name that matches the slug.
          :::
        type: object
        additionalProperties:
          title: Discussion Category
          description: |
            Information about a discussion category.
          type: object
          additionalProperties: false
          properties:
            name:
              title: Name
              description: |
                Name of the discussion category.

                This is automatically fetched from the 
                [GitHub API](https://docs.github.com/en/graphql/reference/objects#discussioncategory).
              type: string
            id:
              title: ID
              description: |
                Node ID of the `DiscussionCategory` object in the GitHub API.

                This is automatically fetched from the 
                [GitHub API](https://docs.github.com/en/graphql/reference/objects#discussioncategory).
              type: string
            form:
              title: Category Form
              description: |
                Form definition for a specific discussion category, according to GitHub's
                [syntax for discussion category forms](https://docs.github.com/en/discussions/managing-discussions-for-your-community/syntax-for-discussion-category-forms),
                which is a subset of the [syntax for issue forms](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-issue-forms).
              type: object
              additionalProperties: false
              properties:
                title:
                  title: Title
                  description: A default title that will be pre-populated in the discussion submission form.
                  type: string
                labels:
                  title: Labels
                  description: Labels that will automatically be added to discussions created with this template.
                  type: array
                  uniqueItems: true
                  items:
                    title: Label
                    description: Name of an available label to add.
                    type: string
                body:
                  title: Body
                  description: |
                    Definition of the elements in the discussion form, according to GitHub's
                    [syntax for GitHub's form schema](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-githubs-form-schema),
                    which is shared between issue forms and discussion category forms.
                  type: array
                  items:
                    title: Form Element
                    description: Definition of a form element in the discussion form's body.
                    type: object
                    additionalProperties: false
                    required: [ type, attributes ]
                    properties:
                      type:
                        title: Type
                        description: Type of the element.
                        type: string
                        enum: [ checkboxes, dropdown, input, markdown, textarea ]
                      id:
                        title: ID
                        description: |
                          The canonical identifier for the element in URL query parameter prefills.
                          It can only use alpha-numeric characters, hyphens, and underscores,
                          and must be unique in the form definition.
                          Note that `markdown` elements cannot have an ID.
                        type: string
                        pattern: ^[A-Za-z][A-Za-z0-9_-]*$
                      attributes:
                        title: Attributes
                        description: |
                          A set of key-value pairs that define the attributes of the element.
                          Depending on the `type` of the element, different keys are available,
                          defined in GitHub's [form schema syntax](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-githubs-form-schema).
                        type: object
                        additionalProperties: true
                      validations:
                        title: Validations
                        description: |
                          A set of key-value pairs that set constraints on the element.
                          Depending on the `type` of the element, different keys are available,
                          defined in GitHub's [form schema syntax](https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/syntax-for-githubs-form-schema).
                        type: object
                        additionalProperties: true
definitions:
  label_description:
    title: GitHub Label Description
    description: Description of a GitHub label.
    type: string
    maxLength: 100
    examples:
      - The issue is being triaged.
  label_color:
    title: GitHub Label Color
    description: Color of a GitHub label, in hexadecimal format.
    type: string
    pattern: ^[0-9a-fA-F]{6}$
    examples:
      - '0366d6'
      - 'f1e05a'
  label_prefix:
    title: GitHub Label Prefix
    description: Prefix for the names of a group of GitHub labels.
    type: string
    examples:
      - 'Version: '
      - 'Branch-'
  label_group_auto:
    title: Automatic GitHub Label Group
    description: An automatic group of GitHub labels.
    type: object
    required: [ prefix, color, description ]
    properties:
      prefix:
        title: Prefix
        description: Prefix of the label names in the group.
        $ref: '#/definitions/label_prefix'
      color:
        title: Color
        description: Color of the label.
        $ref: '#/definitions/label_color'
      description:
        title: Description
        description: Description of the label.
        $ref: '#/definitions/label_description'
  label_group_element:
    title: GitHub Label Group Element
    description: An element of a group of GitHub labels.
    type: object
    additionalProperties: false
    required: [ suffix ]
    properties:
      suffix:
        title: Suffix
        description: Suffix of the label name.
        type: string
        examples:
          - 'major-release'
          - 'triage'
      description:
        title: Description
        description: Description of the label.
        $ref: '#/definitions/label_description'
  label_group:
    title: GitHub Label Group
    description: A group of GitHub labels.
    type: object
    additionalProperties: false
    required: [ prefix, color, label ]
    properties:
      prefix:
        title: Prefix
        description: Prefix for the label name.
        $ref: '#/definitions/label_prefix'
      color:
        title: Color
        description: Color of the label.
        $ref: '#/definitions/label_color'
      label:
        title: Labels
        description: Labels for the group.
        type: object
        additionalProperties:
          title: Label
          description: A label in the group.
          $ref: '#/definitions/label_group_element'
  pre_process:
    type: object
    additionalProperties: false
    properties:
      if_any:
        type: array
        uniqueItems: true
        minItems: 1
        items:
          type: string
      if_all:
        type: array
        uniqueItems: true
        minItems: 1
        items:
          type: string
      if_none:
        type: array
        uniqueItems: true
        minItems: 1
        items:
          type: string
      if_equal:
        type: array
        uniqueItems: true
        minItems: 1
        items:
          type: string
    oneOf:
      - required: [ if_any ]
      - required: [ if_all ]
      - required: [ if_none ]
      - required: [ if_equal ]
  commit_auto:
    title: Automatic Commit
    description: Automatic commit type
    type: object
    additionalProperties: false
    required: [ type ]
    properties:
      type:
        type: string
      changelog_id:
        type: string
      changelog_section_id:
        type: string
  commit_primary:
    title: Primary Commit
    description: Configurations for a primary commit type.
    type: object
    additionalProperties: false
    required: [ type ]
    properties:
      type:
        title: Conventional Commit Type
        description: |
          A [Conventional Commits](https://www.conventionalcommits.org/)-like type for the commit message.
        type: string
        examples:
          - major
          - minor
          - patch
          - web
          - config
      description:
        title: Type Description
        type: string
        examples:
          - Remove features/components from - or introduce breaking changes to - the public API,
            and publish a new major release of the package.
      subtypes:
        title: Subtypes
        description: Configurations for commit sub-types of the commit.
        type: object
        properties:
          any:
            title: Any
            description: |
              A list of `secondary` commit-type IDs,
              of which at least one must be present in the head branch.
            type: array
            items:
              type: string
            minItems: 1
            uniqueItems: true
          all:
            type: array
            items:
              type: string
            minItems: 1
            uniqueItems: true
          include:
            type: array
            items:
              type: string
            minItems: 1
            uniqueItems: true
          exclude:
            title: Exclude
            description: |
              A list of `secondary` commit-type IDs
              that must not be present in the head branch.
            type: array
            items:
              type: string
            minItems: 1
            uniqueItems: true
        allOf:
          - anyOf:
              - required: [ any ]
              - required: [ all ]
          - not:
              anyOf:
                - required: [ include, exclude ]