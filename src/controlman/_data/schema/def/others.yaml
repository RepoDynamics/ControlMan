dependency:
  $schema: https://json-schema.org/draft/2020-12/schema
  title: Definition of a package dependency.
  type: object
  additionalProperties: false
  allOf:
    - $ref: module_dependency
    - oneOf:
        - required: [ conda ]
        - required: [ pip ]
      properties:
        pip:
          type: object
          required: [ spec ]
          properties:
            spec:
              title: |
                Dependency specification for pip, according to 
                [PEP 508](https://peps.python.org/pep-0508/#specification).
              description: |
                For more details, see
                [Version Specifiers](https://packaging.python.org/en/latest/specifications/version-specifiers/#id5)
                in PyPA's Python Packaging User Guide and
                [Requirement Specifiers](https://pip.pypa.io/en/stable/reference/requirement-specifiers/)
                in pip documentation.
              examples:
                - "numpy >= 1.21.2"
              type: string
        conda:
          title: Conda Specification
          type: object
          required: [ spec, channel ]
          properties:
            spec:
              title: |
                Dependency specification for Conda, according to
                [Conda Build](https://conda.io/projects/conda-build/en/stable/resources/package-spec.html#package-match-specifications).
              examples:
                - ">=1.21.2"
              type: string
            channel:
              type: string
              default: conda-forge
              examples:
                - anaconda
                - my-channel
  examples:
    - - pip_spec: "numpy >= 1.21.2"
        usage: Numerical computing.
        url_source: ""
        url_homepage: ""
        url_docs: ""
        conda_spec: ""
        conda_channel: ""
module_dependency:
  $schema: https://json-schema.org/draft/2020-12/schema
  title: Definition of a module dependency.
  type: object
  additionalProperties: false
  required: [ import_name ]
  properties:
    name:
      title: Name of the package.
      type: string
    import_name:
      type: string
    url:
      type: object
      additionalProperties:
        type: object
        required: [ url ]
        properties:
          title:
            type: string
          description:
            type: string
          url:
            $ref: url
      properties:
        docs:
          type: string
          format: uri
        pip:
          title: URL of the pip package.
          default_auto: "https://pypi.org/project/${{ ..name }}"
        conda:
          type: string
          format: uri
          default: "https://anaconda.org/${{ .channel }}/${{ ..name }}"
        source:
          type: string
          format: uri
    intersphinx_mapping:
      type: object
      additionalProperties: false
      properties:
        key:
          type: string
        target:
          type: string
          format: uri
        inventory:
          type: array
          items:
            type: string
          minItems: 1
      required:
        - target
    description:
      type: string
    notes:
      type: string
  examples:
    - - pip_spec: "numpy >= 1.21.2"
        usage: Numerical computing.
        url_source: ""
        url_homepage: ""
        url_docs: ""
        conda_spec: ""
        conda_channel: ""
env_file_config:
  $schema: https://json-schema.org/draft/2020-12/schema
  title: Environment files for dependencies.
  type: object
  additionalProperties: false
  required: [ conda ]
  properties:
    conda:
      title: Conda environment.
      description: Configurations for the output `environment.yaml`-style conda environment file.
      type: object
      additionalProperties: false
      required: [ name, path ]
      properties:
        name:
          title: Name of the environment.
          type: string
          examples:
            - ${{ repo.name }}-dev
            - ${{ repo.name }}-web
            - ${{ pkg.name }}-test
            - my-custom-env
        path:
          title: Path to the environment file.
          type: string
          examples:
            - ${{ dir.pkg.root }}/environment.yaml
            - ${{ dir.web.root }}/env.yml
            - .github/dev_env.yaml
            - environment.yaml
    pip:
      title: Pip environment.
      description: Configurations for the output `requirements.txt`-style pip environment file.
      type: object
      additionalProperties: false
      properties:
        path:
          title: Path to the environment file.
          type: string
          examples:
            - ${{ dir.pkg.root }}/requirements.txt
            - ${{ dir.web.root }}/requirements.txt
            - .github/dev_req.txt
            - requirements.txt







